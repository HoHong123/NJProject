generator client {
  provider = "prisma-client-js"
  output   = "./db"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// TODO : Default 값은 항상 존재해야한다. = null 최소화
//        Int 값은 unsigned인지 명확히 구분
//        + 포스트그레는 unsigned를 지원하지 않는다.
//        Int 값이 충분한가? tinyInt 혹은 BigInt가 더욱 적절하지 않은가?
//        + 각 필요에 따라 자료형을 추가로 적용
//        + @db를 통해 추가적 자료형 적용
//        String이 varchar로 적용되는가? text로 적용되는가?
//        + @db를 통해 추가적인 설정값 적용
//        DateTime과 Timestamp 중 어떤 것으로 실제 DB에 적용되는가? 둘의 차이를 명확히 아는가?
//        + 포스트그레는 시간에 관련된 하나의 데이터형을 지원하고 DateTime과 Timestamp의 차이가 "날짜에 시간까지 표기하느냐?"의 차이로 나뉜다.
model duckUser {
  id        BigInt   @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
  lastLogin DateTime @default(now())

  name     String @default("") @db.VarChar(32)
  email    String @unique @default("") @db.VarChar(64)
  password String @default("") @db.VarChar(32)

  isDeleted Boolean @default(false)
}

model inventory {
  id        BigInt   @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  userId BigInt @unique

  slotSize Int @default(10) @db.SmallInt // unsigned, 포스트그레는 unsigned를 지원하지 않음
  level    Int @default(1) @db.SmallInt // unsigned, 포스트그레는 unsigned를 지원하지 않음
}

model ducks {
  id        BigInt   @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  // Not null?
  userId BigInt?

  name  String @default("") @db.VarChar(64)
  image String @default("") @db.VarChar(256)

  price BigInt @default(0)
}

model trade {
  id        BigInt   @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  auctionId BigInt
  receiver  BigInt
}

model receipt {
  id        BigInt   @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  tradeId BigInt
  status  Int    @default(0) @db.SmallInt
}

model auction {
  id        BigInt   @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  // Default 값을 1주일 뒤로 설정
  expiredAt DateTime @default(dbgenerated("CURRENT_TIMESTAMP + interval '1 week'")) @updatedAt

  seller BigInt
  itemId BigInt

  price BigInt
  tax   BigInt
}
